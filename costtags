import boto3
import json
from pkg_resources import resource_filename

def get_ec2_instance_hourly_price():
                                       

    filters = [
        {'Type': 'TERM_MATCH', 'Field': 'termType', 'Value': 'OnDemand'},
    ]

    pricing_client = boto3.client('pricing', region_name='eu-east-1')
    
    response = pricing_client.get_products(ServiceCode='AmazonEC2', Filters=filters)

    for price in response['PriceList']:
        price = json.loads(price)

        for on_demand in price['terms']['OnDemand'].values():
            for price_dimensions in on_demand['priceDimensions'].values():
                price_value = price_dimensions['pricePerUnit']['USD']
                print(price_value)
            
        return float(price_value)
    return None


if __name__ == "__main__":

    ec2_instance_price = get_ec2_instance_hourly_price()

    print(ec2_instance_price)