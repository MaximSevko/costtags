import boto3
import json
import awspricing

def get_ec2_instance_hourly_price():
              
    client = boto3.client('ec2')
    
    response = client.describe_instances()
    print(response) 

    
    all_ec2_instances = response['Instances']
    print(all_ec2_instances) 


    for instance in all_ec2_instances:
        print(instance) 
        
    
#        response = boto3.tag_resources(
#        ResourceARNList=[
#        instance[arn],
#          ],
#          Tags={
#          'string': 'string'
#       }
#)
#
#
#    filters = [
#        {'Type': 'TERM_MATCH', 'Field': 'termType', 'Value': 'OnDemand'},
#    ]
#
#    pricing_client = boto3.client('pricing', region_name='us-east-1')
#    
#
#    
#    response = pricing_client.get_products(ServiceCode='AmazonEC2', Filters=filters)
#    response2 = pricing_client.describe_services(ServiceCode='AmazonEC2')
#
#
#    print(response2)
#
#
#
#    for price in response['PriceList']:
#        price = json.loads(price)
#
#        for on_demand in price['terms']['OnDemand'].values():
#            for price_dimensions in on_demand['priceDimensions'].values():
#                price_value = price_dimensions['pricePerUnit']['USD']
#                
#                print(price_value)
#            
#        return float(price_value)
    return None




ec2_instance_price = get_ec2_instance_hourly_price()
print(ec2_instance_price)